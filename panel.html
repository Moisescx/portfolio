<!DOCTYPE html>
<html>
<head>
    <title>Panel Admin</title>
    <style>
        body { font-family: Arial; background: #f5f5f5; text-align: center; padding: 50px; }
        #loginForm { background: white; padding: 20px; border-radius: 8px; max-width: 400px; margin: 0 auto; }
        #uploadForm { display: none; } /* Oculto hasta login */
    </style>
</head>
<body>

    <!-- Formulario de Login (contraseña fija) -->
    <div id="loginForm">
        <h2>Acceso al Panel</h2>
        <input type="password" id="passwordInput" placeholder="Contraseña">
        <button onclick="login()">Entrar</button>
        <p id="errorMsg" style="color: red; display: none;">Contraseña incorrecta</p>
    </div>

    <!-- Formulario de Subida (oculto inicialmente) -->
    <form id="uploadForm">
        <input type="file" id="imageInput" accept="image/*" required>
        <input type="text" id="imageTitle" placeholder="Título" required>
        <button type="submit">Subir</button>
    </form>
    <script src="js/carrusel.js"></script>


        <script>
        // Contraseña hardcodeada (cámbiala)
        const CONTRASEÑA = "4&zW4~/~G}Kfpd05MtD8'rEIEnn_";

        function login() {
            const input = document.getElementById("passwordInput").value;
            if (input === CONTRASEÑA) {
                document.getElementById("loginForm").style.display = "none";
                document.getElementById("uploadForm").style.display = "block";
            } else {
                document.getElementById("errorMsg").style.display = "block";
            }
        }

        document.getElementById('uploadForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const file = document.getElementById('imageInput').files[0];
    const title = document.getElementById('imageTitle').value;

    // Convertir imagen a Base64
    const reader = new FileReader();
    reader.readAsDataURL(file);
    reader.onload = async () => {
        const base64File = reader.result.split(',')[1];
        
        const response = await fetch('/.netlify/functions/upload', {
            method: 'POST',
            body: JSON.stringify({
                file: base64File,
                filename: `img-${Date.now()}.${file.name.split('.').pop()}`
            }),
            headers: { 'Content-Type': 'application/json' }
        });
        
        const result = await response.json();
        if (response.ok) {
            alert('¡Imagen subida con éxito!');
            location.reload(); // Recarga para ver cambios
        } else {
            alert(`Error: ${result.error}`);
        }
    };
});
      
    </script>
</body>
</html>